<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd"
        logicalFilePath="update2018-02-18_create_alfabank_keys.xml">

    <changeSet id="alfabank_public_key_postgresql" author="a.leliuk" runOnChange="true" context="postgresql">
        <preConditions onFail="MARK_RAN">
            <and>
                <tableExists tableName="ENCKEY"/>
                <sqlCheck expectedResult="0">SELECT COUNT(*) FROM ENCKEY WHERE KEYTYPE = 'OPC_PUB'</sqlCheck>
            </and>
        </preConditions>
        <sql>
            INSERT INTO ENCKEY (KEYTYPE, REFCODE, CAPACITY, STATCODE, EFFDATE, EXPDATE, KEYVALUE, PUBLICEXPONENT)
            VALUES( 'OPC_PUB', 'FASTTACK', 'T', 0, CURRENT_DATE, (CURRENT_DATE + INTERVAL '120 MONTH')::DATE, 'EB7029C0E50A3A62096D62D1E73D277B3EBB0248EAF5F1BA4558A8D195831E30E364A40940FE1BE8845DCBD54020906EF8D72544D1408D97394079850542FE4516BE5B671588AA42A73F4B3C0A72A5EEB3D293056EEB3F83C0CB766D7EDAAF6C4D9D9D64DA246E6DC184913B75C474D6FB37AF252D49F271BC5A7ACAA7603395B956D3524604E58D9BD0BCCD554D1297126FF4A0A2C021BCFA2455EE7E188D143CE3D256339FE4A00920B2B10CACEC831168DAC85933397F27652DF138C8FFB688E6F1A62660BEB891442A8BAE57150EF5BD5196BA2E78F96B840B5D170FC81EC9E74DC86769BD943BF860360C60DBCAB79C6EC7E81EE8F5D6F70C79115E0275',
            '03');
        </sql>
    </changeSet>

    <changeSet id="alfabank_public_key_oracle" author="a.leliuk" runOnChange="true" context="oracle">
        <preConditions>
            <and>
                <tableExists tableName="ENCKEY"/>
                <sqlCheck expectedResult="0">SELECT COUNT(*) FROM ENCKEY WHERE KEYTYPE = 'OPC_PUB'</sqlCheck>
            </and>
        </preConditions>
        <sql>
            INSERT INTO ENCKEY (ID, KEYTYPE, REFCODE, CAPACITY, STATCODE, EFFDATE, EXPDATE, KEYVALUE, PUBLICEXPONENT) VALUES (
            ENCKEY_ID_SEQ.NEXTVAL, 'OPC_PUB', 'FASTTACK', 'T', 0, TRUNC(SYSDATE), ADD_MONTHS(TRUNC(SYSDATE), 120),
            'EB7029C0E50A3A62096D62D1E73D277B3EBB0248EAF5F1BA4558A8D195831E30E364A40940FE1BE8845DCBD54020906EF8D72544D1408D97394079850542FE4516BE5B671588AA42A73F4B3C0A72A5EEB3D293056EEB3F83C0CB766D7EDAAF6C4D9D9D64DA246E6DC184913B75C474D6FB37AF252D49F271BC5A7ACAA7603395B956D3524604E58D9BD0BCCD554D1297126FF4A0A2C021BCFA2455EE7E188D143CE3D256339FE4A00920B2B10CACEC831168DAC85933397F27652DF138C8FFB688E6F1A62660BEB891442A8BAE57150EF5BD5196BA2E78F96B840B5D170FC81EC9E74DC86769BD943BF860360C60DBCAB79C6EC7E81EE8F5D6F70C79115E0275',
            '03');
        </sql>
    </changeSet>

    <!--OPC_TAV_PRIV-->

    <changeSet id="alfabank_tav_private_postgresql" author="a.leliuk" runOnChange="true" context="postgresql">
        <preConditions onFail="MARK_RAN">
            <and>
                <tableExists tableName="ENCKEY"/>
                <sqlCheck expectedResult="0">SELECT COUNT(*) FROM ENCKEY WHERE KEYTYPE = 'OPC_TAV_PRIV'</sqlCheck>
            </and>
        </preConditions>
        <sql>
            INSERT INTO ENCKEY (KEYTYPE, REFCODE, CAPACITY, STATCODE, EFFDATE, EXPDATE, WRAPPINGKEY, KEYVALUE)
            VALUES ('OPC_TAV_PRIV', 'FASTTACK', 'T', 0, CURRENT_DATE, (CURRENT_DATE + INTERVAL '120 MONTH')::DATE, 'LMK3',
            '6249C3E55E14964C6B62262B0F45A00AED8E9D69009BE78F5F795F8B4E5F8FA08E9AEB5936A6877B1CBA7C033246089190FE389A9047D45800FD71E10EB00C298F265A7444642A74138AC305A861571F16A30F08021C7E9C22596717CCDA9E133EC352F8C02AB494CE083FF316F2CC954B9D789AA722413B973DBE6C41CFE831E23FF68D7F3ED8BDE67229A69D44F62C1849C247C06E617D5B57DB8CDCDA4C3F03C32108D16A89EE89F42895D12110164BBB237987C7292CD90F506FA0D26D00BFB6F8DED2700FBDCC96314A73B5C897B7FD627330EC6B6B2975526984CA5E63C893767BE397A1F44EEC5D1B98D0B726C1FA1C15FA6FF5AED07ECC4EB8AA11A9CF1D96648833B261189C0FE29D9714E218A338485242C352689E2054BB7277A770F17C22BF427559DDD3E552A4C868DD6C288AD0B83AF9E69286E64B7495F216CD764EDC425BE04185F39F7BFC2199E87C23B9DCD1AE981F53F2CA7C5D6729878251CBA9AC4C1CEFB51C27B1F86158FD38BB19042E76F273F95373E32C0FB2BBC9A0F8ADBC849FB30D88545BEBD2AD689CFD1B2861F012954A0DAC5ECFB07C499ED2111FBA6B265F55B9727874D569381DF6B9FE5D8E73FA7B174A9A791806FD4E70C43A4A9C82FA3B362EA020C3543CEE88BEF244AF4F6635FF3D741CC754C461E6FB815B4897844961F5E2FCDFAD89426B94877C69C618EDDF32BB094D37168C3DC4B4BADDF38EEA08B6CFAC4EDD4BB25FC4BC594633A8ADCC9E166AC68FA3D179990D31D96A269D1AEA0A9E42DB3554B72C4C9FAC934C263E5DA32089B64065CB8A37F0241EC5FE398A4BADA2F1E8B9FF202CCA578C1E53558D6313C66B37F27D6ABA95F92833AD0D5180C771B43AEC822F8320AFB2D8683F9C040D7FE3B634A3C9AD2BD43EE1A112C3C81824CE8E16ED4CF54C5322CD3E856DF297222C85AA06B4E9FC47023806FE7991B3BCA86974DEA3C8ED2FE2CCAB8330E5F764AD3A769EF5258BB39981E88DF4463A2B4CBEBD29E6EDE5A0E3EDFC2D11236F31CBFE75DAD6380ABDF9206F6DEF1651094B2650A60B758BE71DB27D0F1F0B3F9A2E999ACFDDC1640ECE2D3A2ADBA731700A7A9FBE653203C8844B318265858974CFC2FE3F6AD32F7E4AB657F67872882B8FF5BB4482FBBAEF59F7BCCD25640EB0D285E2E11FB1212CE6BA07911C1FFDB500E2D122E0382CB535D963CF719CF8CE2CD738E5C61CD9D53C2C39101EE3F1E5F82C99FF3B9247B6946180B2FDBC97CD152BCD76125119C8BCDB946A6EE13C298C20ABB65C80038221A612E1F9AA3FCB3EEDF4DB4EA4CAFCD2BF6F9F0024B96D89F233E64F6C2EDDA1884667949782E8F0200258C0BD281205C3732DB94D95CC45C9FA3E81FF7A9F666479206AF3CCE8DF22A28035491EA380C7ADC398699DACCC1AC36CB01ED54D5E7F417CF2049909A8C189B17E8E96635D3D9ECA6344A8948ECB2156A9726345B0816EECDCC4BDF699737251CC93348AE3B2FED9DF571A8BD7B97BC171D71D078DEB31D1B035D880DD3B24975DB0CC39010BD486B8B9C280C03CC7D48CC6FCDC4237DC9A70907D9759DE4283E32EAE4FFAB097DD398B1C5713106EF53A52D485A458CC3AF8CBA3928753729FDCA88982D992F816E356AF9C5DFBEBAB3D5FBA7E508F824225816B5FFA7B5FE41A3B4C4BAF45EBB806459C1CE180033C625D16B283A5B217DB58B8038BEE'
            );
        </sql>
    </changeSet>

    <changeSet id="alfabank_tav_private_oracle" author="a.leliuk" runOnChange="true" context="oracle">
        <preConditions>
            <and>
                <tableExists tableName="ENCKEY"/>
                <sqlCheck expectedResult="0">SELECT COUNT(*) FROM ENCKEY WHERE KEYTYPE = 'OPC_TAV_PRIV'</sqlCheck>
            </and>
        </preConditions>
        <sql>
            INSERT INTO ENCKEY (ID, KEYTYPE, REFCODE, CAPACITY, STATCODE, EFFDATE, EXPDATE, WRAPPINGKEY, KEYVALUE)
            VALUES (ENCKEY_ID_SEQ.NEXTVAL, 'OPC_TAV_PRIV', 'FASTTACK', 'T', 0, TRUNC (SYSDATE), ADD_MONTHS (TRUNC (SYSDATE), 120), 'LMK3',
            '6249C3E55E14964C6B62262B0F45A00AED8E9D69009BE78F5F795F8B4E5F8FA08E9AEB5936A6877B1CBA7C033246089190FE389A9047D45800FD71E10EB00C298F265A7444642A74138AC305A861571F16A30F08021C7E9C22596717CCDA9E133EC352F8C02AB494CE083FF316F2CC954B9D789AA722413B973DBE6C41CFE831E23FF68D7F3ED8BDE67229A69D44F62C1849C247C06E617D5B57DB8CDCDA4C3F03C32108D16A89EE89F42895D12110164BBB237987C7292CD90F506FA0D26D00BFB6F8DED2700FBDCC96314A73B5C897B7FD627330EC6B6B2975526984CA5E63C893767BE397A1F44EEC5D1B98D0B726C1FA1C15FA6FF5AED07ECC4EB8AA11A9CF1D96648833B261189C0FE29D9714E218A338485242C352689E2054BB7277A770F17C22BF427559DDD3E552A4C868DD6C288AD0B83AF9E69286E64B7495F216CD764EDC425BE04185F39F7BFC2199E87C23B9DCD1AE981F53F2CA7C5D6729878251CBA9AC4C1CEFB51C27B1F86158FD38BB19042E76F273F95373E32C0FB2BBC9A0F8ADBC849FB30D88545BEBD2AD689CFD1B2861F012954A0DAC5ECFB07C499ED2111FBA6B265F55B9727874D569381DF6B9FE5D8E73FA7B174A9A791806FD4E70C43A4A9C82FA3B362EA020C3543CEE88BEF244AF4F6635FF3D741CC754C461E6FB815B4897844961F5E2FCDFAD89426B94877C69C618EDDF32BB094D37168C3DC4B4BADDF38EEA08B6CFAC4EDD4BB25FC4BC594633A8ADCC9E166AC68FA3D179990D31D96A269D1AEA0A9E42DB3554B72C4C9FAC934C263E5DA32089B64065CB8A37F0241EC5FE398A4BADA2F1E8B9FF202CCA578C1E53558D6313C66B37F27D6ABA95F92833AD0D5180C771B43AEC822F8320AFB2D8683F9C040D7FE3B634A3C9AD2BD43EE1A112C3C81824CE8E16ED4CF54C5322CD3E856DF297222C85AA06B4E9FC47023806FE7991B3BCA86974DEA3C8ED2FE2CCAB8330E5F764AD3A769EF5258BB39981E88DF4463A2B4CBEBD29E6EDE5A0E3EDFC2D11236F31CBFE75DAD6380ABDF9206F6DEF1651094B2650A60B758BE71DB27D0F1F0B3F9A2E999ACFDDC1640ECE2D3A2ADBA731700A7A9FBE653203C8844B318265858974CFC2FE3F6AD32F7E4AB657F67872882B8FF5BB4482FBBAEF59F7BCCD25640EB0D285E2E11FB1212CE6BA07911C1FFDB500E2D122E0382CB535D963CF719CF8CE2CD738E5C61CD9D53C2C39101EE3F1E5F82C99FF3B9247B6946180B2FDBC97CD152BCD76125119C8BCDB946A6EE13C298C20ABB65C80038221A612E1F9AA3FCB3EEDF4DB4EA4CAFCD2BF6F9F0024B96D89F233E64F6C2EDDA1884667949782E8F0200258C0BD281205C3732DB94D95CC45C9FA3E81FF7A9F666479206AF3CCE8DF22A28035491EA380C7ADC398699DACCC1AC36CB01ED54D5E7F417CF2049909A8C189B17E8E96635D3D9ECA6344A8948ECB2156A9726345B0816EECDCC4BDF699737251CC93348AE3B2FED9DF571A8BD7B97BC171D71D078DEB31D1B035D880DD3B24975DB0CC39010BD486B8B9C280C03CC7D48CC6FCDC4237DC9A70907D9759DE4283E32EAE4FFAB097DD398B1C5713106EF53A52D485A458CC3AF8CBA3928753729FDCA88982D992F816E356AF9C5DFBEBAB3D5FBA7E508F824225816B5FFA7B5FE41A3B4C4BAF45EBB806459C1CE180033C625D16B283A5B217DB58B8038BEE'
            );
        </sql>
    </changeSet>
</databaseChangeLog>