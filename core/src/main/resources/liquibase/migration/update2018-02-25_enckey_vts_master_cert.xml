<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd"
        logicalFilePath="update2018-02-25_enckey_vts_master_cert.xml">

    <changeSet id="add_enckey_vts_master_cert_postgresql" author="d.koval" runOnChange="true" context="postgresql">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">SELECT COUNT(*) FROM ENCKEY WHERE KEYTYPE = 'VTS_IAPI_VISA_CERT'</sqlCheck>
        </preConditions>
        <sql>
            INSERT INTO ENCKEY
            (KEYTYPE, REFCODE, CAPACITY, STATCODE,
            EFFDATE, EXPDATE,
            KEYVALUE)
            VALUES
            ('VTS_IAPI_VISA_CERT', 'FASTTACK', 'T', 0,
            CURRENT_DATE, (CURRENT_DATE + INTERVAL '120 MONTH')::DATE,
            '-----BEGIN CERTIFICATE-----
            MIIDtzCCAp+gAwIBAgIEo92KjjANBgkqhkiG9w0BAQUFADBZMQswCQYDVQQGEwJV
            QTETMBEGA1UEChMKTU9CTy5DQVJEUzENMAsGA1UECBMES3lpdjENMAsGA1UEBxME
            S3lpdjEXMBUGA1UEAxMOQm9HLW1hc3Rlci1rZXkwHhcNMTYwODEwMDkwNDQ2WhcN
            MjEwODEwMDkwNDQ2WjBZMQswCQYDVQQGEwJVQTETMBEGA1UEChMKTU9CTy5DQVJE
            UzENMAsGA1UECBMES3lpdjENMAsGA1UEBxMES3lpdjEXMBUGA1UEAxMOQm9HLW1h
            c3Rlci1rZXkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC9VUTMH35L
            f4+Eujxw3kPMZJcJW7LGfX2D8bZ8K9CyjY0bBfCUqjFcW/Osj6Zdx8sKjqp0pC/i
            3u0W6tr3t5HPTN0bLRgwXt7oEbwevQckVsuKJ4EzeMn7fZzwaalr2HG0rR0mESzC
            TG+lua4gjS4fCsLUc9h5bIOEw82yGKTCfE0Qg+sKGj3MKNdZmN5AW5XYyTvBqAmm
            Pm8sfC2QtZ9nraaL/JhKKJf4gihVRKkxq/KZdBjO+7tPlE1o5mTvHUmoqf+toJFZ
            BtpvYm5+ND9CpAYk8Jb9hUzIL5sYfUxhNw0Zew/0FEviYn/Cm74BCCGqlnBHFTYa
            Rs+KaOFscXRBAgMBAAGjgYYwgYMwZgYDVR0gBF8wXTBbBg4rBgEEAZUSAgIBAQEB
            ATBJMEcGCCsGAQUFBwICMDsMOVRoaXMgY2VydGlmaWNhdGUgbWF5IGJlIHVzZWQg
            YXMgSXNzdWVyIE1hc3RlciBDZXJ0aWZpY2F0ZTAMBgNVHRMEBTADAQH/MAsGA1Ud
            DwQEAwIBhjANBgkqhkiG9w0BAQUFAAOCAQEAoeUCVePTHbICHQTAn5B1lOzR+Aff
            QUUxq3cqbuDOWfPxP21n4a7VWCvUGD6PS+7NPli8Zbbr6kywltSbGbX0JhRYql30
            nFmiL2en/XcCVQmlUtuBVG6zlVZhECrPzUdKyk3mlEOMd74o9CXM9BmyjVrtqDHA
            u+2bk2W6WmI4vEUlP62jkxjnXDZaXUTog/rulAte9imBYpTN8MWkFPWxAui1ob87
            VnlCDv8DSBAVyXJgQ6+yS0d3me07pRRWSXMiaeBosHIYeMj4U1gc8//nQ+r0UIrE
            S0n0jI6MO4l/aoiavHgacERGjNcCScGkf+59yG21RyfAYdxAUGVHR0i/6A==
            -----END CERTIFICATE-----');
        </sql>
    </changeSet>

    <changeSet id="add_enckey_vts_master_cert_oracle" author="d.koval" runOnChange="true" context="oracle">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">SELECT COUNT(*) FROM ENCKEY WHERE KEYTYPE = 'VTS_IAPI_VISA_CERT'</sqlCheck>
        </preConditions>
        <sql>
            INSERT INTO ENCKEY
            (ID, KEYTYPE, REFCODE, CAPACITY, STATCODE,
            EFFDATE, EXPDATE,
            KEYVALUE)
            VALUES
            (ENCKEY_ID_SEQ.nextval, 'VTS_IAPI_VISA_CERT', 'FASTTACK', 'T', 0,
            trunc(sysdate), add_months(trunc(sysdate), 120),
            '-----BEGIN CERTIFICATE-----
            MIIDtzCCAp+gAwIBAgIEo92KjjANBgkqhkiG9w0BAQUFADBZMQswCQYDVQQGEwJV
            QTETMBEGA1UEChMKTU9CTy5DQVJEUzENMAsGA1UECBMES3lpdjENMAsGA1UEBxME
            S3lpdjEXMBUGA1UEAxMOQm9HLW1hc3Rlci1rZXkwHhcNMTYwODEwMDkwNDQ2WhcN
            MjEwODEwMDkwNDQ2WjBZMQswCQYDVQQGEwJVQTETMBEGA1UEChMKTU9CTy5DQVJE
            UzENMAsGA1UECBMES3lpdjENMAsGA1UEBxMES3lpdjEXMBUGA1UEAxMOQm9HLW1h
            c3Rlci1rZXkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC9VUTMH35L
            f4+Eujxw3kPMZJcJW7LGfX2D8bZ8K9CyjY0bBfCUqjFcW/Osj6Zdx8sKjqp0pC/i
            3u0W6tr3t5HPTN0bLRgwXt7oEbwevQckVsuKJ4EzeMn7fZzwaalr2HG0rR0mESzC
            TG+lua4gjS4fCsLUc9h5bIOEw82yGKTCfE0Qg+sKGj3MKNdZmN5AW5XYyTvBqAmm
            Pm8sfC2QtZ9nraaL/JhKKJf4gihVRKkxq/KZdBjO+7tPlE1o5mTvHUmoqf+toJFZ
            BtpvYm5+ND9CpAYk8Jb9hUzIL5sYfUxhNw0Zew/0FEviYn/Cm74BCCGqlnBHFTYa
            Rs+KaOFscXRBAgMBAAGjgYYwgYMwZgYDVR0gBF8wXTBbBg4rBgEEAZUSAgIBAQEB
            ATBJMEcGCCsGAQUFBwICMDsMOVRoaXMgY2VydGlmaWNhdGUgbWF5IGJlIHVzZWQg
            YXMgSXNzdWVyIE1hc3RlciBDZXJ0aWZpY2F0ZTAMBgNVHRMEBTADAQH/MAsGA1Ud
            DwQEAwIBhjANBgkqhkiG9w0BAQUFAAOCAQEAoeUCVePTHbICHQTAn5B1lOzR+Aff
            QUUxq3cqbuDOWfPxP21n4a7VWCvUGD6PS+7NPli8Zbbr6kywltSbGbX0JhRYql30
            nFmiL2en/XcCVQmlUtuBVG6zlVZhECrPzUdKyk3mlEOMd74o9CXM9BmyjVrtqDHA
            u+2bk2W6WmI4vEUlP62jkxjnXDZaXUTog/rulAte9imBYpTN8MWkFPWxAui1ob87
            VnlCDv8DSBAVyXJgQ6+yS0d3me07pRRWSXMiaeBosHIYeMj4U1gc8//nQ+r0UIrE
            S0n0jI6MO4l/aoiavHgacERGjNcCScGkf+59yG21RyfAYdxAUGVHR0i/6A==
             -----END CERTIFICATE-----');
        </sql>
    </changeSet>

    <changeSet id="add_VTS_MASTER_SEC_postgresql" author="d.koval" runOnChange="true" context="postgresql">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">SELECT COUNT(*) FROM ENCKEY WHERE KEYTYPE = 'VTS_IAPI_ISS_PRIV'</sqlCheck>
        </preConditions>
        <sql>
            INSERT INTO ENCKEY
            (KEYTYPE, REFCODE, CAPACITY, STATCODE,
            CHECKVALUE, EFFDATE, EXPDATE, WRAPPINGKEY, KEYVALUE,
            PUBLICEXPONENT)
            Values
            ('VTS_IAPI_ISS_PRIV', 'FASTTACK', 'T', 0,
            NULL, CURRENT_DATE, (CURRENT_DATE + INTERVAL '120 MONTH')::DATE, 'LMK3', 'EF44A6D278BF166A50D2B633B575BA62FF7992ECBE94CEFF470213300CA5B2AC9504C40369DF7B0B57EF6AA8DAED707C874B58E3358EA295237B51BE9EB3A64E8173469F3E52A74337354800D5264A2ECA2A73AA424B0393A4735E6D3AAD58DC3EB85F89DF885038C5155DA20FEEE6A90AE49DB9D3D5B2564ED261622550326FF8402496FD8BD4CE1E5FACE48087BC4507C46C5D2243928B20E339A9599D67444EA2A879B916346B2A58800F8919B8896B452BD996FF697659094E20FCBF73B091D9A0641DA31F37EB2A58D76E1B096BD34F6405259388FFF8FE86BFC647A0C1627797AF3F7BF9097E067AAB917D2B0544E541BBF0DE11D02D348619F7D54F86D0B206DA7D838FED8A46364151D92F234D931B78C7878486A55D4B7AC3EB67DAC2D96EC2C44035382647759AE8021645D9B7B0335EFD3CA1F079BDEC1229395B6BD2BF5BC7630AFD00E23E9059DA8D2C93B4BDC023C3A9FC4D66F1FE563D6E8C21ACFFB13F5B38F6F4F88EF2D10FDD8553DE800C9439CE19128CAC4406527404919B080B6A041930D9D3034073FBDF7D71F1B8DEED85CBCFD5EC88FF1DD00260526C6D0C974863CC3BEFF2F6BC99E0F42B68314149A9845629922FA9A3D51A7B53F96EB4C370118278F1A4F69ACB0F517F8289DDD32C912FD2B94782BD0D116AAA599470736D5DEF2A4F542BA40D1AF4A04897BC8641A416B8EA9F2566A7D663ECC9EB003D913510D4DFCFCC89A060A6274DF45FF69F9CACFD50B712E4B735AAE48865FF8853A93491B4B2A2B7B0FD316D5737EF0B62AFAAA628EA57CAC42F965B9C8AB3952C024C6ABD8A5176C36B32679A7B8AD2DC97DF76746D6495AF1CC5727F394D452C428C02480DC8A6D19E07EEFB8937E09E2ECDD14D9805517F91FB3B27502B53FF41C60926255130DA97B278B14A1BB685744A3CCC241B8ADAC2726167D216F112C8D97BF39138B5F55ADC5B83B31620C6D996173A2C0887B288ED5001C8F5F5388B1EE450607788CB2619961E3571EA25E342B6895BC87B63F71BCBE0AAD24281FF21DB2C635DA9141AB920FDB0619E6D86BF35E71C7A0B5EF15D283305B0533D75369435D778AD121752393936B304A4AC7A4494105EF8D90025542F93F7C2D4634846DA7670E39D87E45D5770AC3F7EB271B3537D13B38481976FBD7C1E8C9B9242534EDE4F452CA48CA9A16743246875311F35285A5A047F230B1548C30D2C02F41D40AD0BA1CB9FEE8A5ADCA0B1E59DD3E9E8B154D19BD76F93AC8BEF9AD8D157069C8C06B76A06AB1CE969CFF788B60E960A5282CD81EEB5602235426348835E6BFF283900E2F25430F62472329A850BB12066CB7FBF10E39BB44E61A6DE2C9F148A8141A508AB6C4ED870442D9163B18F0174DF0D59639490A5029B9C4378899F0E7C1319834AC840BA282C074FBF36043CB552BC6E073881CED671DD2C5B6F36E71326B58F101F64D5A584B5A10EC177B271367FBBC29F42989BD6A6FBCE04C11A1E948A0A853F937679339041010D1DBF53E487EBB553EE3701FE9CE5DCB68253BA8519C048B1E8892272DE2E31D997B52A2BA431272A27127C5018C13DDD24C649ACA5848DF0D675108979BB03794BA40794950469FA0D335C2E09B95C09FD8C8E6127BEA6E38C3CBDC4535B2C3A13B29513C3A01C3A814E9CBF34FF2D0FDCD04BF0FA558876CE7D3499EDF3FCEDC4AA3066B26972A37CAA6B98E96333DADE2F4E88D458CEDA',
            NULL);
        </sql>
    </changeSet>

    <changeSet id="add_VTS_MASTER_SEC_oracle" author="d.koval" runOnChange="true" context="oracle">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">SELECT COUNT(*) FROM ENCKEY WHERE KEYTYPE = 'VTS_IAPI_ISS_PRIV'</sqlCheck>
        </preConditions>
        <sql>
            INSERT INTO ENCKEY
            (ID, KEYTYPE, REFCODE, CAPACITY, STATCODE,
            CHECKVALUE, EFFDATE, EXPDATE, WRAPPINGKEY, KEYVALUE,
            PUBLICEXPONENT)
            Values
            (ENCKEY_ID_SEQ.nextval, 'VTS_IAPI_ISS_PRIV', 'FASTTACK', 'T', 0,
            NULL, trunc(sysdate), add_months(trunc(sysdate), 120), 'LMK3', 'EF44A6D278BF166A50D2B633B575BA62FF7992ECBE94CEFF470213300CA5B2AC9504C40369DF7B0B57EF6AA8DAED707C874B58E3358EA295237B51BE9EB3A64E8173469F3E52A74337354800D5264A2ECA2A73AA424B0393A4735E6D3AAD58DC3EB85F89DF885038C5155DA20FEEE6A90AE49DB9D3D5B2564ED261622550326FF8402496FD8BD4CE1E5FACE48087BC4507C46C5D2243928B20E339A9599D67444EA2A879B916346B2A58800F8919B8896B452BD996FF697659094E20FCBF73B091D9A0641DA31F37EB2A58D76E1B096BD34F6405259388FFF8FE86BFC647A0C1627797AF3F7BF9097E067AAB917D2B0544E541BBF0DE11D02D348619F7D54F86D0B206DA7D838FED8A46364151D92F234D931B78C7878486A55D4B7AC3EB67DAC2D96EC2C44035382647759AE8021645D9B7B0335EFD3CA1F079BDEC1229395B6BD2BF5BC7630AFD00E23E9059DA8D2C93B4BDC023C3A9FC4D66F1FE563D6E8C21ACFFB13F5B38F6F4F88EF2D10FDD8553DE800C9439CE19128CAC4406527404919B080B6A041930D9D3034073FBDF7D71F1B8DEED85CBCFD5EC88FF1DD00260526C6D0C974863CC3BEFF2F6BC99E0F42B68314149A9845629922FA9A3D51A7B53F96EB4C370118278F1A4F69ACB0F517F8289DDD32C912FD2B94782BD0D116AAA599470736D5DEF2A4F542BA40D1AF4A04897BC8641A416B8EA9F2566A7D663ECC9EB003D913510D4DFCFCC89A060A6274DF45FF69F9CACFD50B712E4B735AAE48865FF8853A93491B4B2A2B7B0FD316D5737EF0B62AFAAA628EA57CAC42F965B9C8AB3952C024C6ABD8A5176C36B32679A7B8AD2DC97DF76746D6495AF1CC5727F394D452C428C02480DC8A6D19E07EEFB8937E09E2ECDD14D9805517F91FB3B27502B53FF41C60926255130DA97B278B14A1BB685744A3CCC241B8ADAC2726167D216F112C8D97BF39138B5F55ADC5B83B31620C6D996173A2C0887B288ED5001C8F5F5388B1EE450607788CB2619961E3571EA25E342B6895BC87B63F71BCBE0AAD24281FF21DB2C635DA9141AB920FDB0619E6D86BF35E71C7A0B5EF15D283305B0533D75369435D778AD121752393936B304A4AC7A4494105EF8D90025542F93F7C2D4634846DA7670E39D87E45D5770AC3F7EB271B3537D13B38481976FBD7C1E8C9B9242534EDE4F452CA48CA9A16743246875311F35285A5A047F230B1548C30D2C02F41D40AD0BA1CB9FEE8A5ADCA0B1E59DD3E9E8B154D19BD76F93AC8BEF9AD8D157069C8C06B76A06AB1CE969CFF788B60E960A5282CD81EEB5602235426348835E6BFF283900E2F25430F62472329A850BB12066CB7FBF10E39BB44E61A6DE2C9F148A8141A508AB6C4ED870442D9163B18F0174DF0D59639490A5029B9C4378899F0E7C1319834AC840BA282C074FBF36043CB552BC6E073881CED671DD2C5B6F36E71326B58F101F64D5A584B5A10EC177B271367FBBC29F42989BD6A6FBCE04C11A1E948A0A853F937679339041010D1DBF53E487EBB553EE3701FE9CE5DCB68253BA8519C048B1E8892272DE2E31D997B52A2BA431272A27127C5018C13DDD24C649ACA5848DF0D675108979BB03794BA40794950469FA0D335C2E09B95C09FD8C8E6127BEA6E38C3CBDC4535B2C3A13B29513C3A01C3A814E9CBF34FF2D0FDCD04BF0FA558876CE7D3499EDF3FCEDC4AA3066B26972A37CAA6B98E96333DADE2F4E88D458CEDA',
            NULL);
        </sql>
    </changeSet>


</databaseChangeLog>